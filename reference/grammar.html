<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>10. Full Grammar specification &mdash; Python 3.11.0a0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Python 3.11.0a0 documentation"
          href="../_static/opensearch.xml"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="The Python Standard Library" href="../library/index.html" />
    <link rel="prev" title="9. Top-level components" href="toplevel_components.html" />
    <link rel="canonical" href="https://docs.python.org/3/reference/grammar.html" />
    
      
    

    
    <style>
      @media only screen {
        table.full-width-table {
            width: 100%;
        }
      }
    </style>
 

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../contents.html" class="icon icon-home"> Python
          </a>
              <div class="version">
                3.11
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatsnew/index.html">What’s New in Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">The Python Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../using/index.html">Python Setup and Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">The Python Language Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="lexical_analysis.html">2. Lexical analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="datamodel.html">3. Data model</a></li>
<li class="toctree-l2"><a class="reference internal" href="executionmodel.html">4. Execution model</a></li>
<li class="toctree-l2"><a class="reference internal" href="import.html">5. The import system</a></li>
<li class="toctree-l2"><a class="reference internal" href="expressions.html">6. Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple_stmts.html">7. Simple statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="compound_stmts.html">8. Compound statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="toplevel_components.html">9. Top-level components</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">10. Full Grammar specification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../library/index.html">The Python Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extending/index.html">Extending and Embedding the Python Interpreter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c-api/index.html">Python/C API Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../distributing/index.html">Distributing Python Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installing/index.html">Installing Python Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">Python HOWTOs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Python Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About these documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bugs.html">Dealing with Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../copyright.html">Copyright</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">History and License</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../distutils/index.html">Distributing Python Modules (Legacy version)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/index.html">Installing Python Modules (Legacy version)</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../contents.html">Python</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../contents.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">The Python Language Reference</a> &raquo;</li>
      <li><span class="section-number">10. </span>Full Grammar specification</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/reference/grammar.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="full-grammar-specification">
<h1><span class="section-number">10. </span>Full Grammar specification<a class="headerlink" href="#full-grammar-specification" title="Permalink to this headline"></a></h1>
<p>This is the full Python grammar, derived directly from the grammar
used to generate the CPython parser (see <a href="#id1"><span class="problematic" id="id2">:source:`Grammar/python.gram`</span></a>).
The version here omits details related to code generation and
error recovery.</p>
<p>The notation is a mixture of <a class="reference external" href="https://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_form">EBNF</a>
and <a class="reference external" href="https://en.wikipedia.org/wiki/Parsing_expression_grammar">PEG</a>.
In particular, <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> followed by a symbol, token or parenthesized
group indicates a positive lookahead (i.e., is required to match but
not consumed), while <code class="docutils literal notranslate"><span class="pre">!</span></code> indicates a negative lookahead (i.e., is
required _not_ to match).  We use the <code class="docutils literal notranslate"><span class="pre">|</span></code> separator to mean PEG’s
“ordered choice” (written as <code class="docutils literal notranslate"><span class="pre">/</span></code> in traditional PEG grammars). See
<span class="target" id="index-0"></span><a class="pep reference external" href="https://www.python.org/dev/peps/pep-0617"><strong>PEP 617</strong></a> for more details on the grammar’s syntax.</p>
<div class="highlight-peg notranslate"><div class="highlight"><pre><span></span><span class="c1"># PEG grammar for Python</span>

<span class="nc">@trailer</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">void *</span>
<span class="s1">_PyPegen_parse(Parser *p)</span>
<span class="s1">{</span>
<span class="s1">    // Initialize keywords</span>
<span class="s1">    p-&gt;keywords = reserved_keywords;</span>
<span class="s1">    p-&gt;n_keyword_lists = n_keyword_lists;</span>
<span class="s1">    p-&gt;soft_keywords = soft_keywords;</span>

<span class="s1">    // Run parser</span>
<span class="s1">    void *result = NULL;</span>
<span class="s1">    if (p-&gt;start_rule == Py_file_input) {</span>
<span class="s1">        result = file_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_single_input) {</span>
<span class="s1">        result = interactive_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_eval_input) {</span>
<span class="s1">        result = eval_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_func_type_input) {</span>
<span class="s1">        result = func_type_rule(p);</span>
<span class="s1">    } else if (p-&gt;start_rule == Py_fstring_input) {</span>
<span class="s1">        result = fstring_rule(p);</span>
<span class="s1">    }</span>

<span class="s1">    return result;</span>
<span class="s1">}</span>
<span class="s1">&#39;&#39;&#39;</span>

<span class="c1"># ========================= START OF THE GRAMMAR =========================</span>

<span class="c1"># General grammatical elements and rules:</span>
<span class="c1">#</span>
<span class="c1"># * Strings with double quotes (&quot;) denote SOFT KEYWORDS</span>
<span class="c1"># * Strings with single quotes (&#39;) denote KEYWORDS</span>
<span class="c1"># * Upper case names (NAME) denote tokens in the Grammar/Tokens file</span>
<span class="c1"># * Rule names starting with &quot;invalid_&quot; are used for specialized syntax errors</span>
<span class="c1">#     - These rules are NOT used in the first pass of the parser.</span>
<span class="c1">#     - Only if the first pass fails to parse, a second pass including the invalid</span>
<span class="c1">#       rules will be executed.</span>
<span class="c1">#     - If the parser fails in the second phase with a generic syntax error, the</span>
<span class="c1">#       location of the generic failure of the first pass will be used (this avoids</span>
<span class="c1">#       reporting incorrect locations due to the invalid rules).</span>
<span class="c1">#     - The order of the alternatives involving invalid rules matter</span>
<span class="c1">#       (like any rule in PEG).</span>
<span class="c1">#</span>
<span class="c1"># Grammar Syntax (see PEP 617 for more information):</span>
<span class="c1">#</span>
<span class="c1"># rule_name: expression</span>
<span class="c1">#   Optionally, a type can be included right after the rule name, which</span>
<span class="c1">#   specifies the return type of the C or Python function corresponding to the</span>
<span class="c1">#   rule:</span>
<span class="c1"># rule_name[return_type]: expression</span>
<span class="c1">#   If the return type is omitted, then a void * is returned in C and an Any in</span>
<span class="c1">#   Python.</span>
<span class="c1"># e1 e2</span>
<span class="c1">#   Match e1, then match e2.</span>
<span class="c1"># e1 | e2</span>
<span class="c1">#   Match e1 or e2.</span>
<span class="c1">#   The first alternative can also appear on the line after the rule name for</span>
<span class="c1">#   formatting purposes. In that case, a | must be used before the first</span>
<span class="c1">#   alternative, like so:</span>
<span class="c1">#       rule_name[return_type]:</span>
<span class="c1">#            | first_alt</span>
<span class="c1">#            | second_alt</span>
<span class="c1"># ( e )</span>
<span class="c1">#   Match e (allows also to use other operators in the group like &#39;(e)*&#39;)</span>
<span class="c1"># [ e ] or e?</span>
<span class="c1">#   Optionally match e.</span>
<span class="c1"># e*</span>
<span class="c1">#   Match zero or more occurrences of e.</span>
<span class="c1"># e+</span>
<span class="c1">#   Match one or more occurrences of e.</span>
<span class="c1"># s.e+</span>
<span class="c1">#   Match one or more occurrences of e, separated by s. The generated parse tree</span>
<span class="c1">#   does not include the separator. This is otherwise identical to (e (s e)*).</span>
<span class="c1"># &amp;e</span>
<span class="c1">#   Succeed if e can be parsed, without consuming any input.</span>
<span class="c1"># !e</span>
<span class="c1">#   Fail if e can be parsed, without consuming any input.</span>
<span class="c1"># ~</span>
<span class="c1">#   Commit to the current alternative, even if it fails to parse.</span>
<span class="c1">#</span>

<span class="c1"># STARTING RULES</span>
<span class="c1"># ==============</span>

<span class="nc">file</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">statements</span><span class="p">]</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_module</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">interactive</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statement_newline</span> <span class="nc">{</span> <span class="nc">_PyAST_Interactive</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">eval</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expressions</span> <span class="nc">NEWLINE</span><span class="o">*</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyAST_Expression</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">func_type</span><span class="p">[</span><span class="s">mod_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">type_expressions</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;-&gt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">NEWLINE</span><span class="o">*</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyAST_FunctionType</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">fstring</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">star_expressions</span>

<span class="c1"># GENERAL STATEMENTS</span>
<span class="c1"># ==================</span>

<span class="nc">statements</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statement</span><span class="o">+</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_flatten</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">statement</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">compound_stmt</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span> <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">simple_stmts</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">statement_newline</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">compound_stmt</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">simple_stmts</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">_PyAST_Pass</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ENDMARKER</span> <span class="nc">{</span> <span class="nc">_PyPegen_interactive_exit</span><span class="p">(</span><span class="nc">p</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">simple_stmts</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">simple_stmt</span> <span class="o">!</span><span class="s1">&#39;;&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span> <span class="c1"># Not needed, there for speedup</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;;&#39;</span><span class="k">.</span><span class="nc">simple_stmt</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;;&#39;</span><span class="p">]</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># NOTE: assignment MUST precede expression, else parsing a simple assignment</span>
<span class="c1"># will throw a SyntaxError.</span>
<span class="nc">simple_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">assignment</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span> <span class="nc">_PyAST_Expr</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;return&#39;</span> <span class="nc">return_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;import&#39;</span> <span class="o">|</span> <span class="s1">&#39;from&#39;</span><span class="p">)</span> <span class="nc">import_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;raise&#39;</span> <span class="nc">raise_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;pass&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Pass</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;del&#39;</span> <span class="nc">del_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;yield&#39;</span> <span class="nc">yield_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;assert&#39;</span> <span class="nc">assert_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;break&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Break</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;continue&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Continue</span><span class="p">(</span><span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;global&#39;</span> <span class="nc">global_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;nonlocal&#39;</span> <span class="nc">nonlocal_stmt</span>

<span class="nc">compound_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;def&#39;</span> <span class="o">|</span> <span class="s1">&#39;@&#39;</span> <span class="o">|</span> <span class="nc">ASYNC</span><span class="p">)</span> <span class="nc">function_def</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;if&#39;</span> <span class="nc">if_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;class&#39;</span> <span class="o">|</span> <span class="s1">&#39;@&#39;</span><span class="p">)</span> <span class="nc">class_def</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;with&#39;</span> <span class="o">|</span> <span class="nc">ASYNC</span><span class="p">)</span> <span class="nc">with_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;for&#39;</span> <span class="o">|</span> <span class="nc">ASYNC</span><span class="p">)</span> <span class="nc">for_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;try&#39;</span> <span class="nc">try_stmt</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;while&#39;</span> <span class="nc">while_stmt</span>
    <span class="o">|</span> <span class="nc">match_stmt</span>

<span class="c1"># SIMPLE STATEMENTS</span>
<span class="c1"># =================</span>

<span class="c1"># NOTE: annotated_rhs may start with &#39;yield&#39;; yield_expr must start with &#39;yield&#39;</span>
<span class="nc">assignment</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;=&#39; d=annotated_rhs { d }</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span>
            <span class="nc">stmt_ty,</span>
            <span class="nc">6,</span>
            <span class="s2">&quot;Variable annotation syntax is&quot;</span><span class="nc">,</span>
            <span class="nc">_PyAST_AnnAssign</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">1,</span> <span class="nc">EXTRA</span><span class="p">)</span>
        <span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">single_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">b</span> <span class="nc">}</span>
         <span class="o">|</span> <span class="nc">single_subscript_attribute_target</span><span class="p">)</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;=&#39; d=annotated_rhs { d }</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">6,</span> <span class="s2">&quot;Variable annotations syntax is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AnnAssign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">0,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="nc">z</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span><span class="p">)</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">{</span>
         <span class="nc">_PyAST_Assign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">single_target</span> <span class="nc">b</span><span class="o">=</span><span class="nc">augassign</span> <span class="o">~</span> <span class="nc">c</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span><span class="p">)</span> <span class="nc">{</span>
         <span class="nc">_PyAST_AugAssign</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;kind,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_assignment</span>

<span class="nc">annotated_rhs</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span>

<span class="nc">augassign</span><span class="p">[</span><span class="s">AugOperator*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;+=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Add</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;-=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Sub</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Mult</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;@=&#39;</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">AugOperator</span><span class="o">*</span><span class="nc">,</span> <span class="nc">5,</span> <span class="s2">&quot;The &#39;@&#39; operator is&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">MatMult</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;/=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Div</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;%=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Mod</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&amp;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitAnd</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;|=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitOr</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;^=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">BitXor</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&lt;&lt;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">LShift</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;&gt;&gt;=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">RShift</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Pow</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;//=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_augoperator</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">FloorDiv</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">return_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;return&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Return</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">raise_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;raise&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;from&#39; z=expression { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Raise</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;raise&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Raise</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">global_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;global&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">NAME</span><span class="o">+</span> <span class="nc">{</span>
    <span class="nc">_PyAST_Global</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">nonlocal_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;nonlocal&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">NAME</span><span class="o">+</span> <span class="nc">{</span>
    <span class="nc">_PyAST_Nonlocal</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">del_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;del&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">del_targets</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;;&#39;</span> <span class="o">|</span> <span class="nc">NEWLINE</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_Delete</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_del_stmt</span>

<span class="nc">yield_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">y</span><span class="o">=</span><span class="nc">yield_expr</span> <span class="nc">{</span> <span class="nc">_PyAST_Expr</span><span class="p">(</span><span class="nc">y,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">assert_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;assert&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;,&#39; z=expression { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Assert</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">import_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">import_name</span> <span class="o">|</span> <span class="nc">import_from</span>

<span class="c1"># Import statements</span>
<span class="c1"># -----------------</span>

<span class="nc">import_name</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;import&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_as_names</span> <span class="nc">{</span> <span class="nc">_PyAST_Import</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="c1"># note below: the (&#39;.&#39; | &#39;...&#39;) is necessary because &#39;...&#39; is tokenized as ELLIPSIS</span>
<span class="nc">import_from</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="s1">&#39;import&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">import_from_targets</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ImportFrom</span><span class="p">(</span><span class="nc">b-&gt;v.Name.id,</span> <span class="nc">c,</span> <span class="nc">_PyPegen_seq_count_dots</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span><span class="o">+</span> <span class="s1">&#39;import&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">import_from_targets</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ImportFrom</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">_PyPegen_seq_count_dots</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">import_from_targets</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">import_from_as_names</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">import_from_as_names</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_alias_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">alias_ty,</span> <span class="nc">_PyPegen_alias_for_star</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">EXTRA</span><span class="p">)))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_import_from_targets</span>
<span class="nc">import_from_as_names</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">import_from_as_name</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">import_from_as_name</span><span class="p">[</span><span class="s">alias_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_alias</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                                               <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span>
                                               <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">dotted_as_names</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_alias_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">dotted_as_name</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">dotted_as_name</span><span class="p">[</span><span class="s">alias_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_alias</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                                                      <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span>
                                                      <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">dotted_name</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">dotted_name</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_join_names_with_dot</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">NAME</span>

<span class="c1"># COMPOUND STATEMENTS</span>
<span class="c1"># ===================</span>

<span class="c1"># Common elements</span>
<span class="c1"># ---------------</span>

<span class="nc">block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">a</span><span class="o">=</span><span class="nc">statements</span> <span class="nc">DEDENT</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">simple_stmts</span>
    <span class="o">|</span> <span class="nc">invalid_block</span>

<span class="nc">decorators</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;@&#39;</span> <span class="nc">f</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">f</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># Class definitions</span>
<span class="c1"># -----------------</span>

<span class="nc">class_def</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">decorators</span> <span class="nc">b</span><span class="o">=</span><span class="nc">class_def_raw</span> <span class="nc">{</span> <span class="nc">_PyPegen_class_def_decorators</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">class_def_raw</span>

<span class="nc">class_def_raw</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_class_def_raw</span>
    <span class="o">|</span> <span class="s1">&#39;class&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;(&#39; z=[arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span>] <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ClassDef</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span>
                     <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                     <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                     <span class="nc">c,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Function definitions</span>
<span class="c1"># --------------------</span>

<span class="nc">function_def</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">d</span><span class="o">=</span><span class="nc">decorators</span> <span class="nc">f</span><span class="o">=</span><span class="nc">function_def_raw</span> <span class="nc">{</span> <span class="nc">_PyPegen_function_def_decorators</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">d,</span> <span class="nc">f</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">function_def_raw</span>

<span class="nc">function_def_raw</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_def_raw</span>
    <span class="o">|</span> <span class="s1">&#39;def&#39;</span> <span class="nc">n</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;(&#39;</span> <span class="nc">params</span><span class="o">=</span><span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-&gt;&#39; z=expression { z }</span><span class="p">]</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">func_type_comment</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_FunctionDef</span><span class="p">(</span><span class="nc">n-&gt;v.Name.id,</span>
                        <span class="p">(</span><span class="nc">params</span><span class="p">)</span> <span class="o">?</span> <span class="nc">params</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span>
                        <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ASYNC</span> <span class="s1">&#39;def&#39;</span> <span class="nc">n</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;(&#39;</span> <span class="nc">params</span><span class="o">=</span><span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-&gt;&#39; z=expression { z }</span><span class="p">]</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">func_type_comment</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span>
            <span class="nc">stmt_ty,</span>
            <span class="nc">5,</span>
            <span class="s2">&quot;Async functions are&quot;</span><span class="nc">,</span>
            <span class="nc">_PyAST_AsyncFunctionDef</span><span class="p">(</span><span class="nc">n-&gt;v.Name.id,</span>
                            <span class="p">(</span><span class="nc">params</span><span class="p">)</span> <span class="o">?</span> <span class="nc">params</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span>
                            <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span>
        <span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Function parameters</span>
<span class="c1"># -------------------</span>

<span class="nc">params</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_parameters</span>
    <span class="o">|</span> <span class="nc">parameters</span>

<span class="nc">parameters</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_no_default</span> <span class="nc">b</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">d</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">d</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_with_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">star_etc</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_etc</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Some duplication here because we can&#39;t write (&#39;,&#39; | &amp;&#39;)&#39;),</span>
<span class="c1"># which is because we don&#39;t support empty alternatives (yet).</span>

<span class="nc">slash_no_default</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">slash_with_default</span><span class="p">[</span><span class="s">SlashWithDefault*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_etc</span><span class="p">[</span><span class="s">StarEtc*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_maybe_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">param_maybe_default</span><span class="o">+</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kwds</span> <span class="nc">{</span> <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_star_etc</span>

<span class="nc">kwds</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># One parameter.  This *includes* a following comma and type comment.</span>
<span class="c1">#</span>
<span class="c1"># There are three styles:</span>
<span class="c1"># - No default</span>
<span class="c1"># - With default</span>
<span class="c1"># - Maybe with default</span>
<span class="c1">#</span>
<span class="c1"># There are two alternative forms of each, to deal with type comments:</span>
<span class="c1"># - Ends in a comma followed by an optional type comment</span>
<span class="c1"># - No comma, optional type comment, must be followed by close paren</span>
<span class="c1"># The latter form is for a final parameter without trailing comma.</span>
<span class="c1">#</span>

<span class="nc">param_no_default</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_add_type_comment_to_arg</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_with_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param_maybe_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="s1">&#39;,&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="nc">tc</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">tc</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">param</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="nc">annotation</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">_PyAST_arg</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">annotation</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">default</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># If statement</span>
<span class="c1"># ------------</span>

<span class="nc">if_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_if_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="nc">elif_stmt</span> <span class="nc">{</span>
        <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">c</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">elif_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_elif_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="nc">elif_stmt</span> <span class="nc">{</span>
        <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_stmt_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">c</span><span class="p">))</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_If</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">else_block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_else_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;else&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">b</span> <span class="nc">}</span>

<span class="c1"># While statement</span>
<span class="c1"># ---------------</span>

<span class="nc">while_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_while_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;while&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_While</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># For statement</span>
<span class="c1"># -------------</span>

<span class="nc">for_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_for_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;for&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">ex</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_For</span><span class="p">(</span><span class="nc">t,</span> <span class="nc">ex,</span> <span class="nc">b,</span> <span class="nc">el,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ASYNC</span> <span class="s1">&#39;for&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">ex</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async for loops are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncFor</span><span class="p">(</span><span class="nc">t,</span> <span class="nc">ex,</span> <span class="nc">b,</span> <span class="nc">el,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_for_target</span>

<span class="c1"># With statement</span>
<span class="c1"># --------------</span>

<span class="nc">with_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_with_stmt_indent</span>
    <span class="o">|</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_With</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;with&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_With</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ASYNC</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
       <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async with statements are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncWith</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">ASYNC</span> <span class="s1">&#39;with&#39;</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_withitem_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">with_item</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">tc</span><span class="o">=</span><span class="p">[</span><span class="s">TYPE_COMMENT</span><span class="p">]</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
       <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Async with statements are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_AsyncWith</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">NEW_TYPE_COMMENT</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tc</span><span class="p">)</span><span class="nc">,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_with_stmt</span>

<span class="nc">with_item</span><span class="p">[</span><span class="s">withitem_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;as&#39;</span> <span class="nc">t</span><span class="o">=</span><span class="nc">star_target</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_withitem</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">t,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_with_item</span>
    <span class="o">|</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_withitem</span><span class="p">(</span><span class="nc">e,</span> <span class="nc">NULL,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Try statement</span>
<span class="c1"># -------------</span>

<span class="nc">try_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_try_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">f</span><span class="o">=</span><span class="nc">finally_block</span> <span class="nc">{</span> <span class="nc">_PyAST_Try</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">f,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">ex</span><span class="p">[</span><span class="s">asdl_excepthandler_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">except_block</span><span class="o">+</span> <span class="nc">el</span><span class="o">=</span><span class="p">[</span><span class="s">else_block</span><span class="p">]</span> <span class="nc">f</span><span class="o">=</span><span class="p">[</span><span class="s">finally_block</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Try</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">ex,</span> <span class="nc">el,</span> <span class="nc">f,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Except statement</span>
<span class="c1"># ----------------</span>

<span class="nc">except_block</span><span class="p">[</span><span class="s">excepthandler_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_except_stmt_indent</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="nc">e</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">t</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;as&#39; z=NAME { z }</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_ExceptHandler</span><span class="p">(</span><span class="nc">e,</span> <span class="p">(</span><span class="nc">t</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">t</span><span class="p">)</span><span class="nc">-&gt;v.Name.id</span> <span class="o">:</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">_PyAST_ExceptHandler</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_except_stmt</span>
<span class="nc">finally_block</span><span class="p">[</span><span class="s">asdl_stmt_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_finally_stmt</span>
    <span class="o">|</span> <span class="s1">&#39;finally&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="c1"># Match statement</span>
<span class="c1"># ---------------</span>

<span class="nc">match_stmt</span><span class="p">[</span><span class="s">stmt_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;match&quot;</span> <span class="nc">subject</span><span class="o">=</span><span class="nc">subject_expr</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">cases</span><span class="p">[</span><span class="s">asdl_match_case_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">case_block</span><span class="o">+</span> <span class="nc">DEDENT</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">stmt_ty,</span> <span class="nc">10,</span> <span class="s2">&quot;Pattern matching is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_Match</span><span class="p">(</span><span class="nc">subject,</span> <span class="nc">cases,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_match_stmt</span>

<span class="nc">subject_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">values</span><span class="o">=</span><span class="nc">star_named_expressions</span><span class="o">?</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">value,</span> <span class="nc">values</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">named_expression</span>

<span class="nc">case_block</span><span class="p">[</span><span class="s">match_case_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_case_block</span>
    <span class="o">|</span> <span class="s2">&quot;case&quot;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">patterns</span> <span class="nc">guard</span><span class="o">=</span><span class="nc">guard</span><span class="o">?</span> <span class="s1">&#39;:&#39;</span> <span class="nc">body</span><span class="o">=</span><span class="nc">block</span> <span class="nc">{</span>
        <span class="nc">_PyAST_match_case</span><span class="p">(</span><span class="nc">pattern,</span> <span class="nc">guard,</span> <span class="nc">body,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">guard</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;if&#39;</span> <span class="nc">guard</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">{</span> <span class="nc">guard</span> <span class="nc">}</span>

<span class="nc">patterns</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">open_sequence_pattern</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">pattern</span>

<span class="nc">pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">as_pattern</span>
    <span class="o">|</span> <span class="nc">or_pattern</span>

<span class="nc">as_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">pattern,</span> <span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_as_pattern</span>

<span class="nc">or_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="k">.</span><span class="nc">closed_pattern</span><span class="o">+</span> <span class="nc">{</span>
        <span class="nc">asdl_seq_LEN</span><span class="p">(</span><span class="nc">patterns</span><span class="p">)</span> <span class="o">==</span> <span class="nc">1</span> <span class="o">?</span> <span class="nc">asdl_seq_GET</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">0</span><span class="p">)</span> <span class="o">:</span> <span class="nc">_PyAST_MatchOr</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">closed_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">literal_pattern</span>
    <span class="o">|</span> <span class="nc">capture_pattern</span>
    <span class="o">|</span> <span class="nc">wildcard_pattern</span>
    <span class="o">|</span> <span class="nc">value_pattern</span>
    <span class="o">|</span> <span class="nc">group_pattern</span>
    <span class="o">|</span> <span class="nc">sequence_pattern</span>
    <span class="o">|</span> <span class="nc">mapping_pattern</span>
    <span class="o">|</span> <span class="nc">class_pattern</span>

<span class="c1"># Literal patterns are used for equality and identity constraints</span>
<span class="nc">literal_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">signed_number</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">complex_number</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">strings</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSingleton</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Literal expressions are used to restrict permitted mapping pattern keys</span>
<span class="nc">literal_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">signed_number</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;+&#39;</span> <span class="o">|</span> <span class="s1">&#39;-&#39;</span><span class="p">)</span>
    <span class="o">|</span> <span class="nc">complex_number</span>
    <span class="o">|</span> <span class="nc">strings</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">complex_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">signed_real_number</span> <span class="s1">&#39;+&#39;</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">imaginary_number</span> <span class="nc">{</span>
        <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">real,</span> <span class="nc">Add,</span> <span class="nc">imag,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">signed_real_number</span> <span class="s1">&#39;-&#39;</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">imaginary_number</span>  <span class="nc">{</span>
        <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">real,</span> <span class="nc">Sub,</span> <span class="nc">imag,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">signed_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NUMBER</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">number</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">number,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">signed_real_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real_number</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">real</span><span class="o">=</span><span class="nc">real_number</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">real,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">real_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">real</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyPegen_ensure_real</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">real</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">imaginary_number</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">imag</span><span class="o">=</span><span class="nc">NUMBER</span> <span class="nc">{</span> <span class="nc">_PyPegen_ensure_imaginary</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">imag</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">capture_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">pattern_capture_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="o">!</span><span class="s2">&quot;_&quot;</span> <span class="nc">name</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">name,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">wildcard_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;_&quot;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchAs</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">value_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">attr</span><span class="o">=</span><span class="nc">attr</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchValue</span><span class="p">(</span><span class="nc">attr,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">attr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">value</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;.&#39;</span> <span class="nc">attr</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">value,</span> <span class="nc">attr-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">name_or_attr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">attr</span>
    <span class="o">|</span> <span class="nc">NAME</span>

<span class="nc">group_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">pattern</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">pattern</span> <span class="nc">}</span>

<span class="nc">sequence_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">maybe_sequence_pattern</span><span class="o">?</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">open_sequence_pattern</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_MatchSequence</span><span class="p">(</span><span class="nc">patterns,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">open_sequence_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">maybe_star_pattern</span> <span class="s1">&#39;,&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">maybe_sequence_pattern</span><span class="o">?</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">pattern,</span> <span class="nc">patterns</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">maybe_sequence_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">patterns</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">maybe_star_pattern</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="nc">{</span> <span class="nc">patterns</span> <span class="nc">}</span>

<span class="nc">maybe_star_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">star_pattern</span>
    <span class="o">|</span> <span class="nc">pattern</span>

<span class="nc">star_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchStar</span><span class="p">(</span><span class="nc">target-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">wildcard_pattern</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchStar</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">mapping_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">rest</span><span class="o">=</span><span class="nc">double_star_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">rest-&gt;v.Name.id,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">items</span><span class="o">=</span><span class="nc">items_pattern</span> <span class="s1">&#39;,&#39;</span> <span class="nc">rest</span><span class="o">=</span><span class="nc">double_star_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">rest-&gt;v.Name.id,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">items</span><span class="o">=</span><span class="nc">items_pattern</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchMapping</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">items</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">NULL,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">items_pattern</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">key_value_pattern</span><span class="o">+</span>

<span class="nc">key_value_pattern</span><span class="p">[</span><span class="s">KeyPatternPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">key</span><span class="o">=</span><span class="p">(</span><span class="nc">literal_expr</span> <span class="o">|</span> <span class="nc">attr</span><span class="p">)</span> <span class="s1">&#39;:&#39;</span> <span class="nc">pattern</span><span class="o">=</span><span class="nc">pattern</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_key_pattern_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">key,</span> <span class="nc">pattern</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">double_star_pattern</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">target</span><span class="o">=</span><span class="nc">pattern_capture_target</span> <span class="nc">{</span> <span class="nc">target</span> <span class="nc">}</span>

<span class="nc">class_pattern</span><span class="p">[</span><span class="s">pattern_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span><span class="nc">cls,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span><span class="nc">cls,</span> <span class="nc">patterns,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">keywords</span><span class="o">=</span><span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span>
            <span class="nc">cls,</span> <span class="nc">NULL,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span>
                <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">cls</span><span class="o">=</span><span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">patterns</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="s1">&#39;,&#39;</span> <span class="nc">keywords</span><span class="o">=</span><span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_MatchClass</span><span class="p">(</span>
            <span class="nc">cls,</span>
            <span class="nc">patterns,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_identifier_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_map_names_to_ids</span><span class="p">(</span><span class="nc">p,</span>
                <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_pattern_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_pattern_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_patterns</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">keywords</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_class_pattern</span>

<span class="nc">positional_patterns</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">args</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">pattern</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">args</span> <span class="nc">}</span>

<span class="nc">keyword_patterns</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">keyword_pattern</span><span class="o">+</span>

<span class="nc">keyword_pattern</span><span class="p">[</span><span class="s">KeyPatternPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">arg</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">value</span><span class="o">=</span><span class="nc">pattern</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_pattern_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">arg,</span> <span class="nc">value</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># EXPRESSIONS</span>
<span class="c1"># -----------</span>

<span class="nc">expressions</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span>

<span class="nc">expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_expression</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;else&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_IfExp</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">disjunction</span>
    <span class="o">|</span> <span class="nc">lambdef</span>

<span class="nc">yield_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;yield&#39;</span> <span class="s1">&#39;from&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_YieldFrom</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;yield&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Yield</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_expressions</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_expression</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">star_expression</span>

<span class="nc">star_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span>

<span class="nc">star_named_expressions</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">star_named_expression</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">star_named_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">named_expression</span>

<span class="nc">assigment_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;:=&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_NamedExpr</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">named_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">assigment_expression</span>
    <span class="o">|</span> <span class="nc">invalid_named_expression</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span>

<span class="nc">disjunction</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">conjunction</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;or&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">conjunction</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyAST_BoolOp</span><span class="p">(</span>
        <span class="nc">Or,</span>
        <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
        <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">conjunction</span>

<span class="nc">conjunction</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;and&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyAST_BoolOp</span><span class="p">(</span>
        <span class="nc">And,</span>
        <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
        <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">inversion</span>

<span class="nc">inversion</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;not&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">inversion</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">Not,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">comparison</span>

<span class="c1"># Comparisons operators</span>
<span class="c1"># ---------------------</span>

<span class="nc">comparison</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">b</span><span class="o">=</span><span class="nc">compare_op_bitwise_or_pair</span><span class="o">+</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Compare</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_int_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_cmpops</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_or</span>

<span class="nc">compare_op_bitwise_or_pair</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">eq_bitwise_or</span>
    <span class="o">|</span> <span class="nc">noteq_bitwise_or</span>
    <span class="o">|</span> <span class="nc">lte_bitwise_or</span>
    <span class="o">|</span> <span class="nc">lt_bitwise_or</span>
    <span class="o">|</span> <span class="nc">gte_bitwise_or</span>
    <span class="o">|</span> <span class="nc">gt_bitwise_or</span>
    <span class="o">|</span> <span class="nc">notin_bitwise_or</span>
    <span class="o">|</span> <span class="nc">in_bitwise_or</span>
    <span class="o">|</span> <span class="nc">isnot_bitwise_or</span>
    <span class="o">|</span> <span class="nc">is_bitwise_or</span>

<span class="nc">eq_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;==&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Eq,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">noteq_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">tok</span><span class="o">=</span><span class="s1">&#39;!=&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_check_barry_as_flufl</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">tok</span><span class="p">)</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">tok}</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NotEq,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lte_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&lt;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">LtE,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lt_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&lt;&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Lt,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">gte_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&gt;=&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">GtE,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">gt_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;&gt;&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Gt,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">notin_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;not&#39;</span> <span class="s1">&#39;in&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NotIn,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">in_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;in&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">In,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">isnot_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;is&#39;</span> <span class="s1">&#39;not&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">IsNot,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">is_bitwise_or</span><span class="p">[</span><span class="s">CmpopExprPair*</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;is&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_cmpop_expr_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">Is,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Logical operators</span>
<span class="c1"># -----------------</span>

<span class="nc">bitwise_or</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="s1">&#39;|&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_xor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitOr,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_xor</span>

<span class="nc">bitwise_xor</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_xor</span> <span class="s1">&#39;^&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_and</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitXor,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">bitwise_and</span>

<span class="nc">bitwise_and</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_and</span> <span class="s1">&#39;&amp;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">BitAnd,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">shift_expr</span>

<span class="nc">shift_expr</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="s1">&#39;&lt;&lt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">sum</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">LShift,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">shift_expr</span> <span class="s1">&#39;&gt;&gt;&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">sum</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">RShift,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">sum</span>

<span class="c1"># Arithmetic operators</span>
<span class="c1"># --------------------</span>

<span class="nc">sum</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">sum</span> <span class="s1">&#39;+&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">term</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Add,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">sum</span> <span class="s1">&#39;-&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">term</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Sub,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">term</span>

<span class="nc">term</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Mult,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;/&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Div,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;//&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">FloorDiv,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;%&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Mod,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">term</span> <span class="s1">&#39;@&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;The &#39;@&#39; operator is&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">MatMult,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">factor</span>

<span class="nc">factor</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;+&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">UAdd,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;-&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">USub,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;~&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_UnaryOp</span><span class="p">(</span><span class="nc">Invert,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">power</span>

<span class="nc">power</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">await_primary</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">factor</span> <span class="nc">{</span> <span class="nc">_PyAST_BinOp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Pow,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">await_primary</span>

<span class="c1"># Primary elements</span>
<span class="c1"># ----------------</span>

<span class="c1"># Primary elements are things like &quot;obj.something.something&quot;, &quot;obj[something]&quot;, &quot;obj(something)&quot;, &quot;obj&quot; ...</span>

<span class="nc">await_primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">AWAIT</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">5,</span> <span class="s2">&quot;Await expressions are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_Await</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">primary</span>

<span class="nc">primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="nc">b</span><span class="o">=</span><span class="nc">genexp</span> <span class="nc">{</span> <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">atom</span>

<span class="nc">slices</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slice</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">slice</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">slice</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">expression</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">expression</span><span class="p">]</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;:&#39; d=[expression</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">d</span> <span class="nc">}</span>] <span class="nc">{</span> <span class="nc">_PyAST_Slice</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NAME</span>
    <span class="o">|</span> <span class="s1">&#39;True&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_True,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;False&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_False,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;None&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_None,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="nc">STRING</span> <span class="nc">strings</span>
    <span class="o">|</span> <span class="nc">NUMBER</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;(&#39;</span> <span class="p">(</span><span class="nc">tuple</span> <span class="o">|</span> <span class="nc">group</span> <span class="o">|</span> <span class="nc">genexp</span><span class="p">)</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;[&#39;</span> <span class="p">(</span><span class="nc">list</span> <span class="o">|</span> <span class="nc">listcomp</span><span class="p">)</span>
    <span class="o">|</span> <span class="o">&amp;</span><span class="s1">&#39;{&#39;</span> <span class="p">(</span><span class="nc">dict</span> <span class="o">|</span> <span class="nc">set</span> <span class="o">|</span> <span class="nc">dictcomp</span> <span class="o">|</span> <span class="nc">setcomp</span><span class="p">)</span>
    <span class="o">|</span> <span class="s1">&#39;...&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Constant</span><span class="p">(</span><span class="nc">Py_Ellipsis,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">group</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">named_expression</span><span class="p">)</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_group</span>

<span class="c1"># Lambda functions</span>
<span class="c1"># ----------------</span>

<span class="nc">lambdef</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;lambda&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_params</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Lambda</span><span class="p">((</span><span class="nc">a</span><span class="p">)</span> <span class="o">?</span> <span class="nc">a</span> <span class="o">:</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">arguments_ty,</span> <span class="nc">_PyPegen_empty_arguments</span><span class="p">(</span><span class="nc">p</span><span class="p">))</span><span class="nc">,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_params</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_lambda_parameters</span>
    <span class="o">|</span> <span class="nc">lambda_parameters</span>

<span class="c1"># lambda_parameters etc. duplicates parameters but without annotations</span>
<span class="c1"># or type comments, and if there&#39;s no comma after a parameter, we expect</span>
<span class="c1"># a colon, not a close parenthesis.  (For more, see parameters above.)</span>
<span class="c1">#</span>
<span class="nc">lambda_parameters</span><span class="p">[</span><span class="s">arguments_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_no_default</span> <span class="nc">b</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">d</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">d</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_with_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_star_etc</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_star_etc</span> <span class="nc">{</span> <span class="nc">_PyPegen_make_arguments</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_slash_no_default</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_arg_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">lambda_slash_with_default</span><span class="p">[</span><span class="s">SlashWithDefault*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_with_default</span><span class="o">+</span> <span class="s1">&#39;/&#39;</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_slash_with_default</span><span class="p">(</span><span class="nc">p,</span> <span class="p">(</span><span class="nc">asdl_arg_seq</span> <span class="o">*</span><span class="p">)</span><span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">lambda_star_etc</span><span class="p">[</span><span class="s">StarEtc*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_maybe_default</span><span class="o">*</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">lambda_param_maybe_default</span><span class="o">+</span> <span class="nc">c</span><span class="o">=</span><span class="p">[</span><span class="s">lambda_kwds</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">b,</span> <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_kwds</span> <span class="nc">{</span> <span class="nc">_PyPegen_star_etc</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_lambda_star_etc</span>

<span class="nc">lambda_kwds</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">lambda_param_no_default</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">lambda_param_with_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lambda_param_maybe_default</span><span class="p">[</span><span class="s">NameDefaultPair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param</span> <span class="nc">c</span><span class="o">=</span><span class="nc">default</span><span class="o">?</span> <span class="o">&amp;</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_name_default_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">NULL</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">lambda_param</span><span class="p">[</span><span class="s">arg_ty</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyAST_arg</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">NULL,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># LITERALS</span>
<span class="c1"># ========</span>

<span class="nc">strings</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">STRING</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyPegen_concatenate_strings</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">list</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_named_expressions</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">tuple</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">y=star_named_expression &#39;,&#39; z=[star_named_expressions</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">y,</span> <span class="nc">z</span><span class="p">)</span> <span class="nc">}</span> ] <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">set</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expressions</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Set</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Dicts</span>
<span class="c1"># -----</span>

<span class="nc">dict</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">double_starred_kvpairs</span><span class="p">]</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Dict</span><span class="p">(</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_keys</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_get_values</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">invalid_double_starred_kvpairs</span> <span class="s1">&#39;}&#39;</span>

<span class="nc">double_starred_kvpairs</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">double_starred_kvpair</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">double_starred_kvpair</span><span class="p">[</span><span class="s">KeyValuePair*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_value_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">NULL,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">kvpair</span>

<span class="nc">kvpair</span><span class="p">[</span><span class="s">KeyValuePair*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_key_value_pair</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># Comprehensions &amp; Generators</span>
<span class="c1"># ---------------------------</span>

<span class="nc">for_if_clauses</span><span class="p">[</span><span class="s">asdl_comprehension_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_comprehension_seq*</span><span class="p">]</span><span class="o">=</span><span class="nc">for_if_clause</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">for_if_clause</span><span class="p">[</span><span class="s">comprehension_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">ASYNC</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">c</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;if&#39;</span> <span class="nc">z</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="nc">{</span>
        <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">comprehension_ty,</span> <span class="nc">6,</span> <span class="s2">&quot;Async comprehensions are&quot;</span><span class="nc">,</span> <span class="nc">_PyAST_comprehension</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">1,</span> <span class="nc">p-&gt;arena</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="o">~</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">c</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;if&#39;</span> <span class="nc">z</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">{</span> <span class="nc">z</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="nc">{</span>
        <span class="nc">_PyAST_comprehension</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">c,</span> <span class="nc">0,</span> <span class="nc">p-&gt;arena</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_for_target</span>

<span class="nc">listcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_ListComp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">setcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_SetComp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">genexp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span> <span class="nc">assigment_expression</span> <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_GeneratorExp</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_comprehension</span>

<span class="nc">dictcomp</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kvpair</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_DictComp</span><span class="p">(</span><span class="nc">a-&gt;key,</span> <span class="nc">a-&gt;value,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_dict_comprehension</span>

<span class="c1"># FUNCTION CALL ARGUMENTS</span>
<span class="c1"># =======================</span>

<span class="nc">arguments</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="o">&amp;</span><span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">invalid_arguments</span>

<span class="nc">args</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">starred_expression</span> <span class="o">|</span> <span class="p">(</span> <span class="nc">assigment_expression</span> <span class="o">|</span> <span class="nc">expression</span> <span class="o">!</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="o">!</span><span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">+</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;,&#39; k=kwargs {k}</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_collect_call_seqs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">kwargs</span> <span class="nc">{</span> <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">_PyPegen_dummy_name</span><span class="p">(</span><span class="nc">p</span><span class="p">)</span><span class="nc">,</span>
                          <span class="nc">CHECK_NULL_ALLOWED</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_extract_starred_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
                          <span class="nc">CHECK_NULL_ALLOWED</span><span class="p">(</span><span class="nc">asdl_keyword_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_delete_starred_exprs</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
                          <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwargs</span><span class="p">[</span><span class="s">asdl_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_starred</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_double_starred</span><span class="o">+</span> <span class="nc">{</span> <span class="nc">_PyPegen_join_sequences</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_starred</span><span class="o">+</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">kwarg_or_double_starred</span><span class="o">+</span>

<span class="nc">starred_expression</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwarg_or_starred</span><span class="p">[</span><span class="s">KeywordOrStarred*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_kwarg</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">0</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">kwarg_or_double_starred</span><span class="p">[</span><span class="s">KeywordOrStarred*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">invalid_kwarg</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">a-&gt;v.Name.id,</span> <span class="nc">b,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyPegen_keyword_or_starred</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">keyword_ty,</span> <span class="nc">_PyAST_keyword</span><span class="p">(</span><span class="nc">NULL,</span> <span class="nc">a,</span> <span class="nc">EXTRA</span><span class="p">))</span><span class="nc">,</span> <span class="nc">1</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># ASSIGNMENT TARGETS</span>
<span class="c1"># ==================</span>

<span class="c1"># Generic targets</span>
<span class="c1"># ---------------</span>

<span class="c1"># NOTE: star_targets may contain *bitwise_or, targets may not.</span>
<span class="nc">star_targets</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="o">!</span><span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">*</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_targets_list_seq</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">star_target</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">star_targets_tuple_seq</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">b</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">star_target</span> <span class="nc">{</span> <span class="nc">c</span> <span class="nc">}</span><span class="p">)</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span> <span class="nc">_PyPegen_seq_insert_in_front</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_target</span> <span class="s1">&#39;,&#39;</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">star_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">(</span><span class="o">!</span><span class="s1">&#39;*&#39;</span> <span class="nc">star_target</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Starred</span><span class="p">(</span><span class="nc">CHECK</span><span class="p">(</span><span class="nc">expr_ty,</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">))</span><span class="nc">,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">target_with_star_atom</span>

<span class="nc">target_with_star_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">star_atom</span>

<span class="nc">star_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">target_with_star_atom</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_targets_tuple_seq</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">star_targets_list_seq</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">single_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">single_subscript_attribute_target</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Store</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">single_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">single_subscript_attribute_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Store,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">t_primary</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Load,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="nc">b</span><span class="o">=</span><span class="nc">genexp</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="nc">,</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span> <span class="nc">NULL,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="p">[</span><span class="s">arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span>
        <span class="nc">_PyAST_Call</span><span class="p">(</span><span class="nc">a,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.args</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="p">(</span><span class="nc">b</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nc">expr_ty</span><span class="p">)</span> <span class="nc">b</span><span class="p">)</span><span class="nc">-&gt;v.Call.keywords</span> <span class="o">:</span> <span class="nc">NULL,</span>
                 <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">atom</span> <span class="o">&amp;</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">t_lookahead</span><span class="o">:</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;.&#39;</span>

<span class="c1"># Targets for del statements</span>
<span class="c1"># --------------------------</span>

<span class="nc">del_targets</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">del_target</span><span class="o">+</span> <span class="p">[</span><span class="s">&#39;,&#39;</span><span class="p">]</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>

<span class="nc">del_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span> <span class="p">(</span><span class="nc">memo</span><span class="p">)</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;.&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Attribute</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b-&gt;v.Name.id,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">t_primary</span> <span class="s1">&#39;[&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">slices</span> <span class="s1">&#39;]&#39;</span> <span class="o">!</span><span class="nc">t_lookahead</span> <span class="nc">{</span> <span class="nc">_PyAST_Subscript</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">del_t_atom</span>

<span class="nc">del_t_atom</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Del</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">del_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyPegen_set_expr_context</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">Del</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">del_targets</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_Tuple</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;[&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="p">[</span><span class="s">del_targets</span><span class="p">]</span> <span class="s1">&#39;]&#39;</span> <span class="nc">{</span> <span class="nc">_PyAST_List</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">Del,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>

<span class="c1"># TYPING ELEMENTS</span>
<span class="c1"># ---------------</span>

<span class="c1"># type_expressions allow */** but ignore them</span>
<span class="nc">type_expressions</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span>
            <span class="nc">p,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">c</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a,</span> <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;**&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span>
        <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_seq_append_to_end</span><span class="p">(</span>
            <span class="nc">p,</span>
            <span class="nc">CHECK</span><span class="p">(</span><span class="nc">asdl_seq</span><span class="o">*</span><span class="nc">,</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">))</span><span class="nc">,</span>
            <span class="nc">b</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;**&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="p">(</span><span class="nc">asdl_expr_seq</span><span class="o">*</span><span class="p">)</span><span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="p">[</span><span class="s">asdl_expr_seq*</span><span class="p">]</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">expression</span><span class="o">+</span> <span class="nc">{a}</span>

<span class="nc">func_type_comment</span><span class="p">[</span><span class="s">Token*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="nc">t</span><span class="o">=</span><span class="nc">TYPE_COMMENT</span> <span class="o">&amp;</span><span class="p">(</span><span class="nc">NEWLINE</span> <span class="nc">INDENT</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">t</span> <span class="nc">}</span>  <span class="c1"># Must be followed by indented block</span>
    <span class="o">|</span> <span class="nc">invalid_double_type_comments</span>
    <span class="o">|</span> <span class="nc">TYPE_COMMENT</span>

<span class="c1"># ========================= END OF THE GRAMMAR ===========================</span>



<span class="c1"># ========================= START OF INVALID RULES =======================</span>

<span class="c1"># From here on, there are rules for invalid syntax with specialised error messages</span>
<span class="nc">invalid_arguments</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="s1">&#39;,&#39;</span> <span class="s1">&#39;*&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;iterable argument unpacking follows keyword argument unpacking&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="s1">&#39;,&#39;</span> <span class="p">[</span><span class="s">args | expression for_if_clauses</span><span class="p">]</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">comprehension_ty</span><span class="p">)</span><span class="nc">-&gt;target,</span> <span class="s2">&quot;Generator expression must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span> <span class="nc">_PyPegen_nonparen_genexp_in_call</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">args</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">asdl_seq_GET</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">b-&gt;size-1</span><span class="p">)</span><span class="nc">-&gt;target,</span> <span class="s2">&quot;Generator expression must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">args</span> <span class="s1">&#39;,&#39;</span> <span class="nc">args</span> <span class="nc">{</span> <span class="nc">_PyPegen_arguments_parsing_error</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_kwarg</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span>
            <span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;expression cannot contain assignment, perhaps you meant \&quot;==\&quot;?&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">expression_without_invalid</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;else&#39;</span> <span class="nc">c</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">_PyAST_IfExp</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">a,</span> <span class="nc">c,</span> <span class="nc">EXTRA</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">disjunction</span>
    <span class="o">|</span> <span class="nc">lambdef</span>
<span class="nc">invalid_legacy_expression</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="o">!</span><span class="s1">&#39;(&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">_PyPegen_check_legacy_stmt</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="o">?</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span>
            <span class="s2">&quot;Missing parentheses in call to &#39;%U&#39;. Did you mean %U(...)?&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;v.Name.id,</span> <span class="nc">a-&gt;v.Name.id</span><span class="p">)</span> <span class="o">:</span> <span class="nc">NULL}</span>

<span class="nc">invalid_expression</span><span class="o">:</span>
   <span class="o">|</span> <span class="nc">invalid_legacy_expression</span>
    <span class="c1"># !(NAME STRING) is not matched so we don&#39;t show this error with some invalid string prefixes like: kf&quot;dsfsdf&quot;</span>
    <span class="c1"># Soft keywords need to also be ignored because they can be parsed as NAME NAME</span>
   <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">NAME</span> <span class="nc">STRING</span> <span class="o">|</span> <span class="nc">SOFT_KEYWORD</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="nc">b</span><span class="o">=</span><span class="nc">expression_without_invalid</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Perhaps you forgot a comma?&quot;</span><span class="p">)</span> <span class="nc">}</span>
   <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">disjunction</span> <span class="s1">&#39;if&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">disjunction</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;else&#39;</span><span class="o">|</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;expected &#39;else&#39; after &#39;if&#39; expression&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_named_expression</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:=&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span> <span class="s2">&quot;cannot use assignment expressions with %s&quot;</span><span class="nc">,</span> <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">))</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">NAME</span> <span class="s1">&#39;=&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">|</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">p-&gt;in_raw_rule</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;invalid syntax. Maybe you meant &#39;==&#39; or &#39;:=&#39; instead of &#39;=&#39;?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="o">!</span><span class="p">(</span><span class="nc">list</span><span class="o">|</span><span class="nc">tuple</span><span class="o">|</span><span class="nc">genexp</span><span class="o">|</span><span class="s1">&#39;True&#39;</span><span class="o">|</span><span class="s1">&#39;None&#39;</span><span class="o">|</span><span class="s1">&#39;False&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">bitwise_or</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;=&#39;</span> <span class="nc">bitwise_or</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">|</span><span class="s1">&#39;:=&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">p-&gt;in_raw_rule</span> <span class="o">?</span> <span class="nc">NULL</span> <span class="o">:</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot assign to %s here. Maybe you meant &#39;==&#39; instead of &#39;=&#39;?&quot;</span><span class="nc">,</span>
                                          <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">))</span> <span class="nc">}</span>

<span class="nc">invalid_assignment</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_ann_assign_target</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="s2">&quot;only single target (not %s) can be annotated&quot;</span><span class="nc">,</span>
            <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span>
        <span class="p">)</span><span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">star_named_expressions</span><span class="o">*</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;only single target (not tuple) can be annotated&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">expression</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;illegal target for annotation&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">STAR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="nc">star_targets</span> <span class="s1">&#39;=&#39;</span><span class="p">)</span><span class="o">*</span> <span class="nc">a</span><span class="o">=</span><span class="nc">yield_expr</span> <span class="s1">&#39;=&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;assignment to yield expression not possible&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">augassign</span> <span class="p">(</span><span class="nc">yield_expr</span> <span class="o">|</span> <span class="nc">star_expressions</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span>
            <span class="nc">a,</span>
            <span class="s2">&quot;&#39;%s&#39; is an illegal expression for augmented assignment&quot;</span><span class="nc">,</span>
            <span class="nc">_PyPegen_get_expr_name</span><span class="p">(</span><span class="nc">a</span><span class="p">)</span>
        <span class="p">)</span><span class="nc">}</span>
<span class="nc">invalid_ann_assign_target</span><span class="p">[</span><span class="s">expr_ty</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">list</span>
    <span class="o">|</span> <span class="nc">tuple</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_ann_assign_target</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">invalid_del_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;del&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">DEL_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_block</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span> <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_comprehension</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;iterable unpacking cannot be used in comprehension&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">b</span><span class="o">=</span><span class="nc">star_named_expressions</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">b,</span> <span class="nc">expr_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="s2">&quot;did you forget parentheses around the comprehension target?&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">(</span><span class="s1">&#39;[&#39;</span> <span class="o">|</span> <span class="s1">&#39;{&#39;</span><span class="p">)</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_named_expression</span> <span class="nc">b</span><span class="o">=</span><span class="s1">&#39;,&#39;</span> <span class="nc">for_if_clauses</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">b,</span> <span class="s2">&quot;did you forget parentheses around the comprehension target?&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_dict_comprehension</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;{&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;**&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">for_if_clauses</span> <span class="s1">&#39;}&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;dict unpacking cannot be used in dict comprehension&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_parameters</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">param_no_default</span><span class="o">*</span> <span class="nc">invalid_parameters_helper</span> <span class="nc">a</span><span class="o">=</span><span class="nc">param_no_default</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;non-default argument follows default argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_parameters_helper</span><span class="o">:</span> <span class="c1"># This is only there to avoid type errors</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">slash_with_default</span> <span class="nc">{</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">param_with_default</span><span class="o">+</span>
<span class="nc">invalid_lambda_parameters</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">lambda_param_no_default</span><span class="o">*</span> <span class="nc">invalid_lambda_parameters_helper</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_param_no_default</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;non-default argument follows default argument&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_lambda_parameters_helper</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">lambda_slash_with_default</span> <span class="nc">{</span> <span class="nc">_PyPegen_singleton_seq</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">lambda_param_with_default</span><span class="o">+</span>
<span class="nc">invalid_star_etc</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span> <span class="p">(</span><span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;**&#39;</span><span class="p">))</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;named arguments must follow bare *&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="s1">&#39;,&#39;</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;bare * has associated type comment&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_lambda_star_etc</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;*&#39;</span> <span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;,&#39;</span> <span class="p">(</span><span class="s1">&#39;:&#39;</span> <span class="o">|</span> <span class="s1">&#39;**&#39;</span><span class="p">))</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;named arguments must follow bare *&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_double_type_comments</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">NEWLINE</span> <span class="nc">TYPE_COMMENT</span> <span class="nc">NEWLINE</span> <span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;Cannot have two type comments on def&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_with_item</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;as&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;,&#39;</span> <span class="o">|</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">STAR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_for_target</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">ASYNC</span><span class="o">?</span> <span class="s1">&#39;for&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">star_expressions</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_INVALID_TARGET</span><span class="p">(</span><span class="nc">FOR_TARGETS,</span> <span class="nc">a</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_group</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">starred_expression</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use starred expression here&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;**&#39;</span> <span class="nc">expression</span> <span class="s1">&#39;)&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use double starred expression here&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_import_from_targets</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">import_from_as_names</span> <span class="s1">&#39;,&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;trailing comma not allowed without surrounding parentheses&quot;</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_with_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="o">&amp;&amp;</span><span class="s1">&#39;:&#39;</span>
<span class="nc">invalid_with_stmt_indent</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;with&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;with&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;with&#39;</span> <span class="s1">&#39;(&#39;</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="p">(</span><span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; star_target</span><span class="p">])</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="o">?</span> <span class="s1">&#39;)&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;with&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_try_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;try&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="s1">&#39;try&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">block</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;except&#39;</span> <span class="o">|</span> <span class="s1">&#39;finally&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;except&#39; or &#39;finally&#39; block&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_except_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;except&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="s1">&#39;,&#39;</span> <span class="nc">expressions</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">{</span>
        <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;multiple exception types must be parenthesized&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_finally_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;finally&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;finally&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_except_stmt_indent</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="nc">expression</span> <span class="p">[</span><span class="s">&#39;as&#39; NAME </span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;except&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;except&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after except statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_match_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;match&quot;</span> <span class="nc">subject_expr</span> <span class="o">!</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">CHECK_VERSION</span><span class="p">(</span><span class="nc">void</span><span class="o">*</span><span class="nc">,</span> <span class="nc">10,</span> <span class="s2">&quot;Pattern matching is&quot;</span><span class="nc">,</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;match&quot;</span> <span class="nc">subject</span><span class="o">=</span><span class="nc">subject_expr</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;match&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_case_block</span><span class="o">:</span>
    <span class="o">|</span> <span class="s2">&quot;case&quot;</span> <span class="nc">patterns</span> <span class="nc">guard</span><span class="o">?</span> <span class="o">!</span><span class="s1">&#39;:&#39;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;case&quot;</span> <span class="nc">patterns</span> <span class="nc">guard</span><span class="o">?</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;case&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_as_pattern</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s2">&quot;_&quot;</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use &#39;_&#39; as a target&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">or_pattern</span> <span class="s1">&#39;as&#39;</span> <span class="o">!</span><span class="nc">NAME</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;invalid pattern target&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_class_pattern</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">name_or_attr</span> <span class="s1">&#39;(&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">invalid_class_argument_pattern</span>  <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_RANGE</span><span class="p">(</span>
        <span class="nc">PyPegen_first_item</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">pattern_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="nc">PyPegen_last_item</span><span class="p">(</span><span class="nc">a,</span> <span class="nc">pattern_ty</span><span class="p">)</span><span class="nc">,</span>
        <span class="s2">&quot;positional patterns follow keyword patterns&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_class_argument_pattern</span><span class="p">[</span><span class="s">asdl_pattern_seq*</span><span class="p">]</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">positional_patterns &#39;,&#39;</span><span class="p">]</span> <span class="nc">keyword_patterns</span> <span class="s1">&#39;,&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">positional_patterns</span> <span class="nc">{</span> <span class="nc">a</span> <span class="nc">}</span>
<span class="nc">invalid_if_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;if&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;if&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;if&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_elif_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;elif&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;elif&#39;</span> <span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;elif&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_else_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;else&#39;</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;else&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_while_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;while&#39;</span> <span class="nc">named_expression</span> <span class="nc">NEWLINE</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR</span><span class="p">(</span><span class="s2">&quot;expected &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;while&#39;</span> <span class="nc">named_expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;while&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_for_stmt</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;for&#39;</span> <span class="nc">star_targets</span> <span class="s1">&#39;in&#39;</span> <span class="nc">star_expressions</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after &#39;for&#39; statement on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_def_raw</span><span class="o">:</span>
    <span class="o">|</span> <span class="p">[</span><span class="s">ASYNC</span><span class="p">]</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;def&#39;</span> <span class="nc">NAME</span> <span class="s1">&#39;(&#39;</span> <span class="p">[</span><span class="s">params</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span> <span class="p">[</span><span class="s">&#39;-&gt;&#39; expression</span><span class="p">]</span> <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after function definition on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_class_def_raw</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;class&#39;</span> <span class="nc">NAME</span> <span class="p">[</span><span class="s">&#39;(&#39;[arguments</span><span class="p">]</span> <span class="s1">&#39;)&#39;</span>] <span class="s1">&#39;:&#39;</span> <span class="nc">NEWLINE</span> <span class="o">!</span><span class="nc">INDENT</span> <span class="nc">{</span>
        <span class="nc">RAISE_INDENTATION_ERROR</span><span class="p">(</span><span class="s2">&quot;expected an indented block after class definition on line %d&quot;</span><span class="nc">,</span> <span class="nc">a-&gt;lineno</span><span class="p">)</span> <span class="nc">}</span>

<span class="nc">invalid_double_starred_kvpairs</span><span class="o">:</span>
    <span class="o">|</span> <span class="s1">&#39;,&#39;</span><span class="k">.</span><span class="nc">double_starred_kvpair</span><span class="o">+</span> <span class="s1">&#39;,&#39;</span> <span class="nc">invalid_kvpair</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use a starred expression in a dictionary value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="o">&amp;</span><span class="p">(</span><span class="s1">&#39;}&#39;</span><span class="o">|</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expression expected after dictionary key and &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
<span class="nc">invalid_kvpair</span><span class="o">:</span>
    <span class="o">|</span> <span class="nc">a</span><span class="o">=</span><span class="nc">expression</span> <span class="o">!</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)</span> <span class="nc">{</span>
        <span class="nc">RAISE_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">p,</span> <span class="nc">PyExc_SyntaxError,</span> <span class="nc">a-&gt;lineno,</span> <span class="nc">a-&gt;end_col_offset</span> <span class="nc">-</span> <span class="nc">1,</span> <span class="nc">a-&gt;end_lineno,</span> <span class="nc">-1,</span> <span class="s2">&quot;&#39;:&#39; expected after dictionary key&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="s1">&#39;:&#39;</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;*&#39;</span> <span class="nc">bitwise_or</span> <span class="nc">{</span> <span class="nc">RAISE_SYNTAX_ERROR_STARTING_FROM</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;cannot use a starred expression in a dictionary value&quot;</span><span class="p">)</span> <span class="nc">}</span>
    <span class="o">|</span> <span class="nc">expression</span> <span class="nc">a</span><span class="o">=</span><span class="s1">&#39;:&#39;</span> <span class="nc">{RAISE_SYNTAX_ERROR_KNOWN_LOCATION</span><span class="p">(</span><span class="nc">a,</span> <span class="s2">&quot;expression expected after dictionary key and &#39;:&#39;&quot;</span><span class="p">)</span> <span class="nc">}</span>
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="toplevel_components.html" class="btn btn-neutral float-left" title="9. Top-level components" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../library/index.html" class="btn btn-neutral float-right" title="The Python Standard Library" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; <a href="../copyright.html">Copyright</a> 2001-2021, Python Software Foundation.
      <span class="lastupdated">Last updated on Sep 03, 2021.
      </span></p>
  </div>

    

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>